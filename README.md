# WEB-ларёк

## Описание проекта

**WEB-ларёк** — это одностраничный интернет-магазин, предлагающий товары для разработчиков. Пользователи могут просматривать каталог товаров, добавлять их в корзину, а затем оформлять заказ через удобную форму с несколькими шагами.

------------

## Используемый стек

- <img src="https://raw.githubusercontent.com/marwin1991/profile-technology-icons/refs/heads/main/icons/typescript.png" width="30" height="30" /> TypeScript
- <img src="https://raw.githubusercontent.com/marwin1991/profile-technology-icons/refs/heads/main/icons/javascript.png" width="30" height="30" /> JavaScript 
- <img src="https://raw.githubusercontent.com/marwin1991/profile-technology-icons/refs/heads/main/icons/webpack.png" width="30" height="30" /> Webpack 
- <img src="https://raw.githubusercontent.com/marwin1991/profile-technology-icons/refs/heads/main/icons/html.png" width="30" height="30" /> HTML 
- <img src="https://www.svgrepo.com/show/374067/scss2.svg" width="30" height="30" /> SCSS 

------------

## Установка и запуск

**Для установки и запуска проекта**

```
npm install
npm run start

```

или

```
yarn
yarn start

```

## Сборка

```
npm run build

```

или

```
yarn build

```

------------
## Описание функционала магазина

 **1. Элементы пользовательского интерфейса**

 **Главный экран:**
 - Логотип и название магазина.
- Навигационное меню в котором только одна кнопка - "**Корзина**"
- Список товаров с изображениями, названиями, ценами.

**Карточка товара:**
- Изображение товара.
- Полное описание (*особенности, характеристики*).
- Цена.
- Кнопка "**Купить**".

**Корзина:**
- Список выбранных товаров с названиями, ценами.
- Возможность удалять товары.
- Общая сумма заказа.
- Кнопка "**Оформить**".

**Форма заказа:**
- Выбор способа оплаты (*онлайн или при получении*).
- Поле для ввода адреса доставки.
- Кнопка "**Далее**".
- После нажатия на кнопку "**Далее**" - Поля для ввода контактных данных (*email, номер телефона*).
- Кнопка оплатить.

**Модальные окна:**
- Окно карточки с товаром, полным описанием, ценой и кнопкой "**Купить**".
- Окно корзины со списком выбранных товаров с названиями, ценами, общей суммой заказа и кнопкой "**Оформить**".
- Окно со способом оплаты (*онлайн\при получении*), вводом адреса доставки и кнопкой "**Далее**".
- Окно с вводом контактной информации (*email\телефон*) и кнопкой "**Оплатить**".
- Окно с изображением галочки, информацией о том, что заказ оформлен, с информацией о том, сколько списано валюты и кнопкой "**За новыми покупками!**".
 
 **2. Как пользователь взаимодействует с приложением**
 
 - Пользователь заходит на главную страницу, просматривает товары.
- Нажимает на карточку товара, чтобы узнать больше, и добавляет товар в корзину нажимая кнопку "**Купить**", при нажатии на кнопку "**Купить**" модальное окно закрывается и пользователь дальше просматривает товары.
- Пользователь, после выбора товаров, открывает корзину, проверяет содержимое и при необходимости вносит изменения (*можно только удалить товар, либо продолжить оформление, либо закрыть модальное окно с корзиной и вернуться к выбору товаров*).
- Заполняет форму заказа - сначала выбирает способ оплаты и вводит адрес доставки, затем после нажатия на кнопку "**Далее**" вводит контактные данные (*номер телефона и email*) и нажимает кнопку "**Оплатить**".

**3. Процесс оформления заказа**

**Добавление товара в корзину:**

- Пользователь нажимает на карточку товара, чтобы узнать больше, и добавляет товар в корзину нажимая кнопку "**Купить**".

**Просмотр корзины:**
- Пользователь, после выбора товаров, открывает корзину, проверяет содержимое и при необходимости вносит изменения (*можно только удалить товар, либо продолжить оформление, либо закрыть модальное окно с корзиной и вернуться к выбору товаров*).

**Заполнение формы заказа:**
- Из корзины пользователь при нажатии на кнопку "**Оформить**" переходит к форме заказа - сначала выбирает способ оплаты и вводит адрес доставки, затем после нажатия на кнопку "**Далее**" вводит контактные данные (*номер телефона и email*) и нажимает кнопку "**Оплатить**".

- В случае ошибок при вводе адреса кнопка "**Далее**" становится неактивной с текстом, рядом с кнопкой - "**Адрес некорректный**".

- В случае ошибок при вводе контактной информации (*email, номер телефона*) кнопка "**Оплатить**" становится неактивной с соответствующим текстом "**Некорректный номер телефона; Некорректный адрес электронной почты**"

### Принцип работы
Проект будет построен на паттерне **MVP**, где каждый компонент системы будет выполнять четко разделенную роль:

-   **Model** — занимается обработкой данных, включая взаимодействие с сервером и хранение данных от пользователя.
-   **View** — отвечает за отображение UI и взаимодействие с пользователем.
-   **Presenter** — его роль выполняет **EventEmitter**, управляющий событиями и связью между **Model** и **View**.

----------

## Основные классы и их функции


### 1. **Класс `EventEmitter`**

`EventEmitter` реализует систему событий в проекте, обеспечивая:

-   Установку слушателей событий с помощью метода `on`.
-   Удаление слушателей с помощью метода `off`.
-   Генерацию событий с помощью метода `emit`, которые могут вызывать обработку в других компонентах.

Использование `EventEmitter` позволяет связать различные части приложения, обеспечивая асинхронную и независимую работу компонентов.

---
### 2. Класс `Api`

Класс `Api` предоставляет методы для взаимодействия с сервером через HTTP-запросы.

-   Реализует GET и POST запросы.
-   Обрабатывает ответы от сервера.

---

### 3. **Класс `ApiModel`**

`ApiModel` управляет взаимодействием с API:

-   Получает информацию о товарах через API запросы.
-   Отправляет данные о заказах.
-   Обрабатывает ошибки, возникающие при взаимодействии с сервером.

Этот класс централизует логику работы с внешними источниками данных и исключает необходимость дублирования запросов в других частях приложения.

---

### 4. **Класс `BasketModel`**

`BasketModel` управляет корзиной покупок:

-   Хранит товары в корзине.
-   Обрабатывает добавление и удаление товаров.
-   Подсчитывает количество товаров и общую стоимость.
-   Имеет методы для очистки корзины.

Это ключевой класс для функционала корзины и обработки покупок, который взаимодействует с компонентами UI.

---

### 5. **Класс `DataModel`**

`DataModel` управляет данными карточек товаров:

-   Хранит список всех доступных товаров.
-   Предоставляет доступ к данным о товаре для различных компонентов.

Этот класс облегчает работу с данными о товарных карточках и делает их доступными для отображения.

---

### 6. **Класс `Modal`**

`Modal` управляет модальными окнами:

-   Обеспечивает открытие и закрытие модальных окон.
-   Рендерит контент внутри окон.

Модальные окна используются для отображения дополнительной информации, например, подробного описания товара или формы оформления заказа.

---

### 7. **Класс `FormModel`**

`FormModel` управляет состоянием формы оформления заказа:

-   Выполняет валидацию данных, введённых пользователем.
-   Содержит логику для сбора и отправки данных о заказе.
-   Следит за состоянием формы (например, успешной отправкой).

Функционал модели связан с бизнес-логикой обработки данных о пользователе и заказе.

---

### 8. **Класс `BasketModel`**

`BasketModel` управляет корзиной покупок:

-   Хранит товары в корзине.
-   Обрабатывает добавление и удаление товаров.
-   Подсчитывает количество товаров и общую стоимость.
-   Имеет методы для очистки корзины.

Это ключевой класс для функционала корзины и обработки покупок, который взаимодействует с компонентами UI.

----------
## Компоненты и их функции


### Модели

1.  **`BasketModel`** – управляет состоянием корзины покупок. Позволяет добавлять и удалять товары, а также подсчитывать общую стоимость и количество товаров.
2.  **`FormModel`** – управляет состоянием формы заказа, включая валидацию и отправку данных.
3.  **`DataModel`** – хранит и управляет данными о товарах.
4.  **`ApiModel`** – отвечает за взаимодействие с внешними API, получая данные о товарах и отправляя заказы.

---

### Представления

1.  **`Card`** – компонент для отображения карточки товара.
2.  **`ProductCard`** – компонент для отображения подробной информации о товаре.
3.  **`BasketItem`** – компонент для отображения элемента корзины.
4.  **`BasketView`** – компонент для отображения всей корзины покупок.
5.  **`OrderForm`** – форма для ввода данных пользователя (например, имя, адрес, контактные данные).
6.  **`FormContacts`** – форма для ввода контактной информации покупателя.
----------

### Процессы в приложении

Процессы в приложении реализованы через события и взаимодействие между компонентами. Основные процессы:

-   **Добавление товара в корзину** : Пользователь нажимает на карточку товара, чтобы узнать больше, и добавляет товар в корзину нажимая кнопку "Купить".
-   **Просмотр корзины** : Пользователь открывает корзину, проверяет содержимое и при необходимости вносит изменения (можно только удалить товар, либо продолжить оформление, либо закрыть модальное окно с корзиной и вернуться к выбору товаров).
-   **Заполнение формы заказа** : Пользователь выбирает способ оплаты и вводит адрес доставки, затем после нажатия на кнопку "Далее" вводит контактные данные (номер телефона и email) и нажимает кнопку "Оплатить".

----------

### Типы данных и интерфейсы

Основные типы данных и интерфейсы, используемые в приложении:

-   **IProductItem** : Интерфейс, описывающий товар.
-   **IOrderLot** : Интерфейс, описывающий данные заказа.
-   **IOrderResult** : Интерфейс, описывающий результат отправки заказа.
-   **FormErrors** : Интерфейс, описывающий ошибки валидации форм.

----------

## Взаимодействие компонентов

Все компоненты взаимодействуют между собой с помощью системы событий через `EventEmitter`. Когда происходит определённое событие, например, добавление товара в корзину или отправка формы, генерируется событие, которое обрабатывается другими компонентами.

-   Когда товар выбирается на странице, генерируется событие `card:selected`, которое передает информацию о выбранном товаре в `DataModel` и в `BasketModel`.
-   Когда пользователь добавляет товар в корзину, генерируется событие `card:addBasket`, которое обновляет корзину и отображение на странице через компонент `BasketView`.
-   В случае оформления заказа генерируется событие `order:submit`, которое инициирует валидацию и отправку данных через `FormModel`.

---

## Процесс работы приложения

### Добавление товара в корзину

1.  Пользователь кликает на товар.
2.  Генерируется событие `card:selected`, которое обновляет выбранный товар в модели `DataModel`.
3.  Генерируется событие `card:addBasket`, которое добавляет товар в корзину через `BasketModel`.
4.  Компонент `BasketView` обновляет отображение корзины, показывая текущее количество товаров и их стоимость.

### Оформление заказа

1.  Пользователь заполняет форму заказа.
2.  Генерируется событие `order:submit`, которое передает данные в `FormModel`.
3.  `FormModel` валидирует данные формы.
4.  В случае успешной валидации, данные отправляются на сервер через `ApiModel`, и появляется сообщение об успешном заказе.